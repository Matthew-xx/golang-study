# 操作撤销、版本回退与HEAD指针

## 撤销上次提交并重新提交commit

    git commit --amend
此选项像是一个追加操作，因为她并不完全撤销上一次的提交信息。

## 把文件从暂存区撤回到未暂存状态

    git reset HEAD <file>

## 把未暂存的文件撤回到上次commit的状态

    git checkout -- <file>
这个操作是从上次发布的快照中，检出当时版本的文件，覆盖当前已修改未暂存的文件

注意**该操作危险，不可撤销**，如果你想撤销未保存的操作，为何不使用编辑器自带的ctrl+Z呢？

## 回到某个文件的某个版本

    git reset --hard <提交号：部分哈希值>
此操作强制

## HEAD与rest详解

HEAD指向当前分支最后一次commit的文件版本。

reset命令专门用来操作HEAD指针。

常见命令：

    git reset [-mixed] <commit号>
此命令 将HEAD指针指向历史中的某次提交。注意，此时不仅HEAD指针指向特定的commit，当前分支也会以这个commit作为结尾。后面的节点仍然存在于git库中，但已经被废弃了（git会当它不存在，除非你主动按照commit号找到它进行操作）。

    git checkout <commit号>
与这个命令有啥区别呢？此时master分支还是以最后一次commit提交为结尾而且暂存区内容与HEAD指向的commit的内容一致。正因为如此，如果此时的HEAD位置上执行新commit，则会在HEAD指向的位置创建新分支来提交。因为你在旧节点基础上创建新分支节点，内容无法追加提交最长节点上。

    git rest HEAD~1
操作HEAD指针相对移动若干个位置。1代表向前移动一个位置。

### git rest的参数

git reset的默认有三个恢复等级，参数有三个

1. -soft 
    仅仅将HEAD指针恢复到某个位置，暂存区内容和工作区内容不变。
    这样操作后，直接commit会

2. --mixed
    将HEAD指针恢复到某个位置，暂存区也清空，但工作区内容不变
3. --hard
    将HEAD指针恢复到某个位置，暂存区也清空，工作区也回到那个位置的版本。

另外，暂存区内容就是HEAD即将要指向的内容