# shell 基础

## shell 格式

### 脚本文件格式

    fileName.sh 一般使用sh结尾，一目了然

### 书写格式

第一行可以指定命令解析器。格式如下

    ```
        #!/bin/bash
    ```

注意事项：

1. 如果不指定，则默认为/bin/sh
2. #指定注释

## shell执行

### 添加执行权限

    chmod 777  xx.sh 
    或者 
    chmod a+x xx.sh
注意：

用户权限分为：用户本身权限，用户所在组的其他用户权限、其他用户权限。
权限为读、写、执行

字母指代：u、g、o。数字按位置指代。
权限指代：r w x，数字是按 4、2、1来指代。

### 执行脚本

    ./xxx.sh

## shell中的变量

### 普通变量

普通变量仅在本进程中有效，生命周期随进程结束而结束

#### 定义普通变量

格式：

    temp=555

注意：等号两边没有空格，shell中空格是分隔符，如果使用两个空格分隔，shell会识别成 命令和两个参数。

### 环境变量

环境变量,是系统级别的变量，共享访问。

#### 系统自带环境变量

- PWD
- SHELL
- PSTH
- HOME

#### 用户自定义环境变量

两种方式：

1. 使用set：在普通变量前加set

    set GOPATH=/home/lerix/go/src

2. 使用export:  

export GOPATH=/home/lerix/go/src

一般使用后者，写入到~/.bashrc中，随系统启动自动执行，从而使系统存在这些环境变量

### 位置变量

执行脚本的时候，可以给脚本传递参数，脚本内部接收这些参数就是利用的位置变量。
实例： test.sh aa bb cc

- $0 ：tesh.sh
- $1 :aa
- $2 :bb
- 以此类推

其中有个$?为状态码

注意：格式化输出时，需要被双引号包裹，用单引号会原生输出。

### 特殊变量

- $# :获取传递的参数个数
- $@ ：给脚本传递的所有参数
- $? ：上一个命令执行完成之后的状态：失败(>0)或成功(0)。注意不是上一个进程状态。
- $$ :脚本进程所在的进程id

### 变量取值

shell把左右输入均看作字符串，

1. 数字也是字符串。
2. 变量名也是字符串，要取变量内容，需要使用$或${}以及$()或``
3. $与${}相同，中间包括变量名 ${value}
4. ``与$()相同，终结包命令名，如$(pwd)

    value=123
    echo $value
    echo ${value}

## 条件判断与循环

### if条件判断

    if [ 条件判断 ];then
        逻辑处理
    fi
    #======================
    if [ 条件判断 ]
    then
        逻辑处理
    fi
    #======================
    if [ 条件判断 ];then
        逻辑处理
    elif [ 条件判断 ];then
        逻辑处理
    elif [ 条件判断 ];then
        逻辑处理
    else
        逻辑处理
    fi

注意:

1. if和[]必须有空格
2. [ 条件判断 ]前后都有空格
3. else if =  elif
4. fi 结尾

### 常见判断

    判断为文件夹 -d
    判断为文件 =s

### for循环

语法:for/while

    for 变量 in 集合;do;done

## 脚本函数

    没有函数修饰符，没有参数，没有返回值

    语法：

    funcName(){
        函数体
    }

    注意，没有参数，但可以利用位置变量，实现传参，且不限个数
