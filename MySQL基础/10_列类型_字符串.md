# 字符串类型

## char 定长字符

不管内容，系统一定分配指定空间，

基本语法：char(L)，L代表字符数（0~255），一个字母一个汉字都认为一个字符

## varchar 变长字符

指定长度后，系统根据实际存储数据计算长度，分配合适的长度。

基本语法: varchar（L）,(理论0~65535个字符，实际会受行长度限制)

注意：varchar要记录数据长度（系统根据数据长度自动分配空间），所以每个varchar数据产生后，系统都会在数据后面增加1到2个字节的额外开销：用来保存数据所占用的空间长度。如果数据本身小于127个字符：额外开销1个字节，如果大于127个，额外开销2个字节

假设在UTF8的情景下（1个字符必占3个字节）

| 存储数据 | char(2) | 占用字节 | varchar(2) | 占用字节 |
| ------ | ------ | ------ |------ |------ |
| A | A | 2\*3=6 |A|1\*3+1=4|
|AB | AB | 2\*3=6 |AB|2\*3+1=7|

### char和varchar的区别

1. char指定多少就会用多少空间，varchar是在指定长度内，根据数据实际长度来定空间。
2. char的查询效率略高，varchar由于需要通过后面的记录位来查询长度，效率略低。

## Text字符文本类型

系统提供4种大小的text类型

- tinytext
- text
- mediumtext
- longtext
无需刻意选择，只需选择text,系统自动选择合适的文本类型。

注意

1. 后面如果指定长度，不会报错误，但是这个长度是不起作用的，意思就是你插入数据的时候，超过你指定的长度还是可以正常插入
2. 一个表中只能有一个text类型
3. 与char和varchar不同的是，text不可以有默认值

### 存储字符串的选择

三种类型都可以存储字符串，应该如何选择？

1. 通常习惯上，确定数据一定是占指定长度，那么使用char类型
2. 不确定就使用varchar
3. 不管确不确定，只要长度超过255个字符，则使用text。

## blob二进制文本类型

可存储二进制文本，如图片，视频之类。但在实际应用中，为缩小数据库体积，通常不会使用blob，通过使用连接指向对应的文件数据库来实现。

此处略去不详细展开

## enum 枚举类型

常用来限制字符内容为可选的几个内容之一。只能保存一个值，却能处理65535个预定义值。

示例：如果sex列中插入了除（男,女,保密）之外的其它字符，则报错。

    create table my_student(
    id int(11) PRIMARY KEY auto_increment,
    name varchar(20) not null,
    sex ENUM('男','女','保密')DEFAULT '保密'
    )charset utf8;
    insert into my_student values(null,'小红','女');

输出

     |  1 | 小红 | 女   |
输入预设值之外的值：

    insert into my_student values(null,'小蓝','啦');

输出

    ERROR 1265 (01000): Data truncated for column 'sex' at row 1
将字段按照数值输出

    select sex + 0 from my_student;
输出

    2

直接用数值赋值性别

    insert into my_student values(null,'小蓝',3);
输出

    |  4 | 小蓝 | 保密 |。证明枚举实际存储的是数字

### 枚举的意义

1. 规范数据，限定插入规定数据项；
2. 节省存储空间；3.单选框

## set多选集

set 是一种多选集合，本质是将指定的项按照对应的二进制位进行控制：1代表被选中，0代表没有被选中

基本语法；set('值1','值2','值3',...)

多个选项，1个字节8个选项，最多8个字节64个选项。

注意：和enum一样最终存储到字段里的依然是数字，而不是字符串

    create table my_set(
    hobby set('篮球','足球','羽毛球','网球','橄榄球','棒球','冰球','乒乓球')
    --           1，2，4，8，16，32，64，128
    )charset utf8;

插入数据注意格式，将选中项用逗号分割组成一个单独的字符串

    insert into my_set values('篮球,足球,羽毛球');
    -- 1+2+4=7
输出

    | 篮球,足球,羽毛球              |
可以不按照顺序插入

    insert into my_set values('棒球,冰球,乒乓球,篮球,足球,羽毛球');
    -- 32+64+128+1+2+4=231
输出

    | 篮球,足球,羽毛球,棒球,冰球,乒乓球 |

验证本质上是数据

    select hobby+0 from my_set;
输出

    |       7 |  |     231 |

既然是数值，就可以代替实际插入.示例：全部选中

    insert into my_set values(255);

### 集合的意义

1. 规范数据
2. 节省存储空间；3.多选框，复选框
