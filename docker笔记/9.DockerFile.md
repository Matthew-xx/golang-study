# Dockerfile

专门用来做镜像的脚本

## 原则

大：大写
空：单独放一个文件夹
单：一个容器一个功能，别太耦合
少：别写太复杂

## 结构

FROM
基础镜像：从哪里来 

MAINTAINER
维护者信息：谁创造的

RUN
修改镜像内容操作命令：要干什么

CMD
容器启动时执行的缺省命令：(限制1条）
docker run时没有指定，dockerfile没有设置entrypoint会执行
如果设置entrypoint，会成为其参数

ENTRYPOINT
容器启动时执行：同CMD(限制1条）
无视docker run时手动指定的命令，并且先执行自己，在把cmd当做参数
 总结执行顺序：entrtpoin>手动>cmd,其中手动与cmd同时存在，则手动会覆盖cmd

EXPOSE
对外端口

### 文件编辑命令

ADD 
将指定文件，复制到容器文件系统中，如果是压缩包文件，会自动解压

COPY
类似ADD，但没有自动解压功能。

VOLUEM
指定一个目录作为映射挂载点，可用来创建数据卷容器

### 环境指令详解

ENV
环境变量

WORKDIR
相当于cd,用于指定RUN CMD等命令的工作路径

USER
指定容器的用户与id

ARG
指定一个可在build时赋值的变量，如果不赋值，则报错


### 触发器指令

ONBUILD
放一些二代镜像命令，构建二代镜像时会执行它 



## 执行

docker build -t [取个名] : [记录下版本] [Dockerfile源目录]

