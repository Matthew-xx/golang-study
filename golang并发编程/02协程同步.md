# 协程同步

## 资源竞争问题

并发的特性使得各协程之间独立同步执行，但在实际应用中，有些操作必须是同时只能一人执行的，否则会出现资源竞争问题。

如：现实生活中的考试，所有学生都在同时书写试卷，不可能排队等待单独考试。所以这里是并发执行。但学生提交试卷是1个1个按次序单独提交，有效避免同时交卷导致争抢收卷老师的问题。

## channel实现同步

    package main
    import (
        "fmt"
        "time"
    )

    //ch:=make(chan int) //全局变量不要自动推导类型
    var ch = make(chan int)
    func Printer(str string) {
        for _, s := range str {
            fmt.Print(string(s))
            time.Sleep(time.Second / 7)
        }
        fmt.Print("\n")
    }
    func Person1() {
        Printer("hello world")
        //给管道写数据，执行完毕动作后，写入数据，另一个任务才能解除阻塞
        ch <- 666
    }
    func Person2() {
        //直接从管道读取数据，显然一开始是没有数据的，阻塞状态
        <-ch
        Printer("my name is mike")
    }
    func main() {
        go Person1()
        go Person2()
        //多任务执行时，资源被竞争
        for {
        }
    }
